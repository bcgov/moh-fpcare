<fpcare-page-framework layout='default'>

  <h1>Child Information</h1>

  <h2>Your child's personal information</h2>

  <!-- Repeat for each child -->
  <form #formRef="ngForm" novalidate>
    <div *ngFor="let child of children; let i = index;">
      <!--Array starts at 0 add one -->
      <h2 class="border-bottom">
        Child #{{children.indexOf(child)+1}}
        <i class="fa fa-times ml-3 pointer" aria-hidden="true" (click)="removeChild( i )"></i>
      </h2>

      <div class="p-md-2 col-md-6">
        <div class="form-group">
          <label for="ch_firstnm_{{i}}">Given Name</label>
          <input class="form-control"
                 type="text"
                 id="ch_firstnm_{{i}}"
                 name="ch_firstnm_{{i}}"
                 fpcareRequired="required,name-check"
                 [(ngModel)]="child.firstName"/>
        </div>
        <div class="form-group">
          <label for="ch_lastnm_{{i}}">Surname</label>
          <input class="form-control"
                 type="text"
                 id="ch_lastnm_{{i}}"
                 name="ch_lastnm_{{i}}"
                 fpcareRequired="required,name-check"
                 [(ngModel)]="child.lastName"/>
        </div>
        <div class="form-group">
          <label for="ch_dob_{{i}}">Birthdate</label>
          <fpcare-date
                  id="ch_dob_{{i}}"
                  [useCurrentDate]="false"
                  [date]="child.dateOfBirth"
                  [restrictDate]="'past'">
          </fpcare-date>
          <div *ngIf="!isLegitDependant(child.dateOfBirth)" role="alert" aria-live="assertive">
            <div class="text-danger">Individual is too old.</div>
          </div>
        </div>
        <div class="form-group">
          <label for="ch_phn_{{i}}">PHN</label>
          <input class="form-control"
                 type="text"
                 id="ch_phn_{{i}}"
                 name="ch_phn_{{i}}"
                 fpcareRequired="required,phn-check"
                 [(ngModel)]="child.phn"/>
          <div *ngIf="hasUniquePhnError(child)" role="alert" aria-live="assertive">
            <div class="text-danger">This PHN was already used for another family member.</div>
          </div>
        </div>
      </div>
    </div>
  </form>

  <button class="btn btn-lg btn-block btn-default" (click)="addChild()" [disabled]="isAddDisabled()">
    Add Child
  </button>

  <aside>
    <div class="todo">
      <ul>
        <li>Add helper text to "aside"</li>
        <li>Need way to separate length messaage from invalid charcters</li>
        <li>ENABLE PHN CHECK VERIFICATION module</li>
      </ul>
    </div>
    <strong>Child Info aside!</strong>
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Eaque modi ipsum cumque tempore dolore explicabo libero, dolor dignissimos debitis minus voluptate quas culpa dolores atque inventore unde iure. Reiciendis, ea.
  </aside>

  <fpcare-form-action-bar
          [submitLabel]="buttonLabel"
          [canContinue]="canContinue()"
          (click)="continue()">
  </fpcare-form-action-bar>

</fpcare-page-framework>