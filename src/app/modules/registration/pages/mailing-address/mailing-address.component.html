<fpcare-page-framework layout='default'>

  <h1>Mailing Address</h1>
  <div class="p-md-2">
    This information is used to confirm your identity and also to mail out Fair PharmaCare letters.
  </div>

  <form #formRef="ngForm" novalidate>
    <div class="p-md-2 col-md-6">
      <div class="form-group">
          <fpcare-postal-code [(value)]="applicant.address.postal" (valueChange)="checkPostal()"></fpcare-postal-code>
          <div *ngIf="!isPostalMatch" class='validation-alert' role="alert" aria-live="assertive">
            <div class="text-danger">The mailing address does not match our records.</div>
          </div>
      </div>
    </div>

    <!-- Displays when Postal Code does not match FPCare records -->
    <div *ngIf="!isPostalMatch">
      <h2 class="border-bottom">
        Update Your Mailing Address
      </h2>
      <div class="p-md-2 col-md-6">
        <div class="form-group">
          <fpcare-geocoder-input label='(optional) Address Lookup' [(address)]='applicant.updAddress'  (addressChange)='onGeoLookup()'></fpcare-geocoder-input>
        </div>
        <div class="form-group">
          <label for="street">Street</label>
          <input class="form-control"
                 type="text"
                 id="street"
                 name="street"
                 fpcareRequired
                 [ngModel]="applicant.updAddress?.street"
                 (ngModelChange)="applicant.updAddress.street=$event" />
        </div>
        <div class="form-group">
          <label for="city">City</label>
          <input class="form-control"
                 type="text"
                 id="city"
                 name="city"
                 fpcareRequired
                 [ngModel]="applicant.updAddress?.city"
                 (ngModelChange)="applicant.updAddress.city=$event" />
        </div>
        <div class="form-group">
          <label for="province">Province</label>
          <input class="form-control"
                 type="text"
                 id="province"
                 name="province"
                 fpcareRequired
                 [ngModel]="applicant.updAddress?.province"
                 (ngModelChange)="applicant.updAddress.province=$event" />
        </div>
        <div class="form-group" #postalCodeContainer>
            <fpcare-postal-code (valueChange)="highlightPostal()" [(value)]="applicant.updAddress.postal"></fpcare-postal-code>
        </div>
        <div class="form-group">
          <label for="country">Country</label>
          <input class="form-control"
                 type="text"
                 id="country"
                 name="country"
                 disabled
                 [ngModel]="applicant.updAddress.country" />
        </div>
      </div>
    </div>
  </form>

  <aside>
    <div>
      <p class="h5">Postal Code</p>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
        Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
    </div>

    <div>
      <p class="h5">Address Lookup</p>
      <p>
          If you have a unit number, e.g. you live in an appartment, 
          put the number at the beginning followed by a space and two dashes <strong>- -</strong>
      </p>
    </div>
  </aside>

  <fpcare-form-action-bar
          [canContinue]="canContinue()"
          (btnClick)="continue()">
  </fpcare-form-action-bar>

</fpcare-page-framework>
